(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},22:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),s=(n(22),n(1)),o=n.n(s),i=n(3),l=n(6),m=function(e){var t=e.onClick,n=e.text;return r.a.createElement("button",{onClick:t},n)},p=n(5),f=n.n(p),d="/api/persons",b=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(d,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(d,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w={getAll:b,addContact:v,deleteContact:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(d,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNumber:h},g=function(e){var t=e.persons,n=e.setPersons,a=e.setOutputMsg,c=e.clearOutputMsg,u=function(){var e=Object(i.a)(o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete ".concat(r.name,"?"))){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,console.log(r),e.next=7,w.deleteContact(r.id);case 7:n(t.filter((function(e){return e.id!==r.id}))),a({message:"Contact ".concat(r.name," deleted."),success:!0}),c(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("p",{key:e.id},e.name," ",e.number," ",r.a.createElement(m,{text:"delete",onClick:function(){return u(e)}}))})))},O=n(4),E=function(e){var t=e.persons,n=e.setPersons,a=e.newPerson,c=e.setNewPerson,u=e.setOutputMsg,s=e.clearOutputMsg,l=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("".concat(a.name," is already saved in contacts. Replace old number with new one?"))){e.next=3;break}return e.abrupt("return");case 3:return r=t.find((function(e){return e.name===a.name})),i=Object(O.a)(Object(O.a)({},r),{},{number:a.number}),e.prev=5,e.next=8,w.updateNumber(r.id,i);case 8:l=e.sent,n(t.filter((function(e){return e.id!==r.id})).concat(l)),u({message:"Contact ".concat(a.name," successfully updated."),success:!0}),s(),c({name:"",number:""}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0),u({message:"Contact ".concat(a.name," could not be updated."),success:!1}),s();case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(o.a.mark((function e(r){var i,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==a.name&&""!==a.name&&void 0!==a.number&&""!==a.number){e.next=6;break}u({message:"Please fill out form before submitting.",success:!1}),s(),e.next=26;break;case 6:if(!t.map((function(e){return e.name})).includes(a.name)){e.next=10;break}l(t,a),e.next=26;break;case 10:return i={name:a.name,number:a.number},e.prev=11,e.next=14,w.addContact(i);case 14:m=e.sent,n(t.concat(m)),u({message:"Contact ".concat(a.name," successfully added."),success:!0}),s(),c({name:"",number:""}),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(11),console.error(e.t0),u({message:"Contact ".concat(a.name," could not be added."),success:!1}),s();case 26:case"end":return e.stop()}}),e,null,[[11,21]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:m},r.a.createElement("div",null,r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:a.name,onChange:function(e){c(Object(O.a)(Object(O.a)({},a),{},{name:e.target.value}))}})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:a.number,onChange:function(e){c(Object(O.a)(Object(O.a)({},a),{},{number:e.target.value}))}}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},k=function(e){var t=e.filterVal,n=e.setFilterVal;return r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement("em",null,"Filter by name:")," ",r.a.createElement("input",{value:t,onChange:function(e){var t=e.target;return n(t.value)}})))},x=function(e){var t=e.data;if(null===t.success)return null;var n=t.success?"success":"error";return r.a.createElement("div",{className:"notification "+n},t.message)},j=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),m=s[0],p=s[1],f=Object(a.useState)(""),d=Object(l.a)(f,2),b=d[0],v=d[1],h=Object(a.useState)({message:null,success:null}),O=Object(l.a)(h,2),j=O[0],C=O[1],y=function(){setTimeout((function(){C({message:"",success:null})}),4e3)},P=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,w.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){P()}),[]);var M=""===b?n:n.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())}));return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement("h4",null,"Add New Contact"),r.a.createElement(E,{newPerson:m,setNewPerson:p,setPersons:c,persons:n,setOutputMsg:C,clearOutputMsg:y}),r.a.createElement(x,{data:j}),r.a.createElement("h4",null,"Contacts List"),r.a.createElement(k,{filterVal:b,setFilterVal:v}),r.a.createElement(g,{persons:M,setPersons:c,setOutputMsg:C,clearOutputMsg:y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.385e705d.chunk.js.map